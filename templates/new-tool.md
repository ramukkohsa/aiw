# Template: Onboarding a New AI Tool

## Steps

### 1. Identify the Tool's Config Format

Every AI CLI tool reads context from a specific file:

| Tool | Config File | Format |
|------|-------------|--------|
| Claude Code | `CLAUDE.md` | Markdown |
| Codex | `AGENTS.md` | Markdown |
| KiloCode | `.kilocode/rules/rules.md` + memory bank | Markdown |
| Cline | `.clinerules` | Markdown |
| Ralph TUI | `progress.md` | Markdown |
| Cursor | `.cursorrules` | Markdown |
| Windsurf | `.windsurfrules` | Markdown |
| Aider | `.aider.conf.yml` | YAML |

### 2. Add to config.toml

```toml
[tools.mytool]
launch = "mytool"                    # CLI command to launch
config_target = ".mytoolrc"          # File the tool reads in project root
history_source = "~/.mytool/history" # Optional: where it stores history
adapter = "adapters/mytool/generate.sh"
```

### 3. Create the Adapter Script

Create `adapters/mytool/generate.sh`:

```bash
#!/usr/bin/env bash
set -euo pipefail

WORKSPACE="${HOME}/.ai-workspace"
source "${WORKSPACE}/adapters/_shared/render-context.sh"

generate_mytool_config() {
    local project="$1"
    local config="${WORKSPACE}/config.toml"

    local proj_path
    proj_path=$(grep -A5 "\\[projects\\.${project}\\]" "$config" | grep "^path" | head -1 | sed 's/.*= *"//' | sed 's/".*//')

    if [ -z "$proj_path" ] || [ ! -d "$proj_path" ]; then
        echo "Error: Project '${project}' not found" >&2
        return 1
    fi

    local output="${proj_path}/.mytoolrc"

    {
        echo "# MyTool Config â€” auto-generated by aiw sync"
        echo ""
        # Render the shared context in whatever format this tool expects
        render_context "$project"
    } > "$output"

    echo "Generated: ${output}"
}

if [ $# -eq 0 ]; then
    for project in $(list_projects); do
        generate_mytool_config "$project" || echo "  Skipped: ${project}"
    done
else
    generate_mytool_config "$1"
fi
```

### 4. Update the aiw CLI

Edit `bin/aiw` to:
1. Add "mytool" to the `adapters` array in `cmd_sync`
2. Add a case for "mytool" in `cmd_start`

### 5. Add History Symlink (Optional)

```bash
ln -sf ~/.mytool/history ~/.ai-workspace/history/sources/mytool.jsonl
```

### 6. Test

```bash
aiw sync
aiw start mytool n8n-workflows
```
